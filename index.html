<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
 <style>
        #subscribed{
            display: none;
        }
    </style>
</head>
<body>
    <button id="subscribe">Subscribe</button>
<div id="subscribed">
    <label><input type="checkbox" id="tag1" value="tag1">tag1</label>    
     <label><input type="checkbox" id="tag2" value="tag2">tag2</label>  
    <button id="add">Add</button>
</div>
    <script src="https://cdn.gravitec.net/sites/gudz/client.js" async></script>
<!-- <script src="http://storage.googleapis.com/vrview/2.0/build/vrview.min.js"></script>
<script src="./script.js"></script> -->
<script>
    var Gravitec = Gravitec || [];
    var subscribed = document.getElementById('subscribed');
    var subscribe = document.getElementById('subscribe');
    
   
    Gravitec.push(['init', {autoRegister: false}])
    Gravitec.push(['getSubscription', function(subscription){
        if(subscription){
            afterSubscription(subscription);
        }else{
           subscribe.addEventListener('click', function(){
                 Gravitec.push(['registerUserForPush', afterSubscription])
              })  
        }
    }])
    
    function afterSubscription(subscription){
        if(!subscription) return;
    subscribed.style.display = 'block';
    subscribe.style.display = 'none';
    var addButton = document.getElementById('add');
    var checkbox1 = document.getElementById('tag1');
    var checkbox2 = document.getElementById('tag2');
        addButton.addEventListener('click', function(){
        var tags = [];
        if(checkbox1.checked){
        tags.push(checkbox1.value);
        }
        if(checkbox2.checked){
         tags.push(checkbox2.value);
        }
         Gravitec.push(['setTags', tags]);
    })
    }
  
</script>
</body>
</html>
